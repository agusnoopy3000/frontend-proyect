<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registro · HuertoHogar</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="assets/css/styles.css">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
<header class="site">
  <div class="container nav">
    <div class="brand">
  <img src="assets/img/huerto_hogar.jpeg" alt="Logo HuertoHogar" style="width:36px;height:36px;object-fit:cover;border-radius:8px;margin-right:8px;">
  <a href="index.html">HuertoHogar</a>
    </div>
    <nav class="navbar navbar-expand-lg">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
        <li class="nav-item"><a class="nav-link" href="catalogo.html">Catálogo</a></li>
        <li class="nav-item"><a class="nav-link" href="carrito.html">Carrito</a></li>
        <li class="nav-item"><a class="nav-link" href="pedido.html">Pedido</a></li>
        <li class="nav-item"><a class="nav-link" href="nosotros.html">Nosotros</a></li>
        <li class="nav-item"><a class="nav-link" href="blog.html">Blog</a></li>
        <li class="nav-item"><a class="nav-link" href="contacto.html">Contacto</a></li>
        <li class="nav-item"><a class="nav-link" href="login.html">Ingresar</a></li>
        <li class="nav-item"><a class="nav-link" href="registro.html">Registro</a></li>
        <li class="nav-item"><a class="nav-link" href="perfil.html">Perfil</a></li>
      </ul>
    </nav>
  </div>
</header>

<main class="container">
<section class="form">
  <h2>Crear cuenta</h2>
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
    <div>
      <label class="form-label" for="regNombre">Nombre</label>
      <input id="regNombre" type="text" autocomplete="name" class="form-control">
      <label class="form-label" for="regRut">RUN</label>
      <input id="regRut" type="text" autocomplete="off" class="form-control" required minlength="7" maxlength="9" placeholder="Ej: 19011022K">
      <label class="form-label" for="regEmail">Email</label>
      <input id="regEmail" type="email" autocomplete="email" class="form-control" required>
      <label class="form-label" for="regTel">Teléfono</label>
      <input id="regTel" type="tel" autocomplete="tel" class="form-control" required pattern="\+?\d[\d\s-]{6,}">
      <label class="form-label" for="regPass">Contraseña</label>
      <input id="regPass" type="password" autocomplete="new-password" class="form-control" required minlength="4" maxlength="10">
      <label class="form-label" for="regPass2">Repite contraseña</label>
      <input id="regPass2" type="password" autocomplete="new-password" class="form-control" required minlength="4" maxlength="10">
      <button class="btn btn-success" id="btnRegistro" type="button">Registrarme</button>
      <p id="regMsg" class="error"></p>
      <p class="help">Al registrarte aceptas términos del curso.</p>
    </div>
    <div>
      <p><strong>Ventajas</strong></p>
      <ul>
        <li>Seguimiento de pedidos</li>
        <li>Historial de compras</li>
        <li>Ofertas personalizadas</li>
      </ul>
    </div>
  </div>
</section>
</main>
<script>
document.getElementById('btnRegistro')?.addEventListener('click', function(e) {
  e.preventDefault();
  const nombre = document.getElementById('regNombre').value.trim();
  const rut = document.getElementById('regRut').value.trim();
  const email = document.getElementById('regEmail').value.trim();
  const tel = document.getElementById('regTel').value.trim();
  const pass = document.getElementById('regPass').value;
  const pass2 = document.getElementById('regPass2').value;
  let msg = '';
  function validarRun(rut){
  run = rut.toUpperCase();
  if (!/^\d{7,8}[0-9K]$/.test(run)) return false;
  let cuerpo = run.slice(0, -1);
  let dv = run.slice(-1);
  let suma = 0, multiplo = 2;
  for (let i = cuerpo.length - 1; i >= 0; i--) {
    suma += parseInt(cuerpo[i]) * multiplo;
    multiplo = multiplo < 7 ? multiplo + 1 : 2;
  }
  let dvEsperado = 11 - (suma % 11);
  dvEsperado = dvEsperado === 11 ? '0' : dvEsperado === 10 ? 'K' : dvEsperado.toString();
  return dv === dvEsperado;
}
  
  if (nombre.length < 3) msg = 'El nombre debe tener al menos 3 caracteres.';
  else if (nombre.length > 100) msg = 'El nombre no puede superar 100 caracteres.';
  else if (!rut || !/^\d{1,2}\.\d{3}\.\d{3}-[\dkK]$/.test(rut) || !validarRun(rut)) msg = 'RUT no válido.';
  else if (email.length > 100) msg = 'El email no puede superar 100 caracteres.';
  else if (!/^.+@(duoc\.cl|profesor\.duoc\.cl|gmail\.com)$/.test(email)) msg = 'Solo se permiten correos @duoc.cl, @profesor.duoc.cl o @gmail.com.';
  else if (!/^\+?\d[\d\s-]{6,}$/.test(tel)) msg = 'Teléfono inválido.';
  else if (pass.length < 4 || pass.length > 10) msg = 'La contraseña debe tener entre 4 y 10 caracteres.';
  else if (pass !== pass2) msg = 'Las contraseñas no coinciden.';
  document.getElementById('regMsg').textContent = msg;
  if (!msg) {
    alert('Registro exitoso');
     window.location.href = 'perfil.html'; // Si quieres redireccionar solo cuando el registro es válido
  }
});
</script>
    </div>
    <div>
      <p><strong>Ventajas</strong></p>
      <ul>
        <li>Seguimiento de pedidos</li>
        <li>Historial de compras</li>
        <li>Ofertas personalizadas</li>
      </ul>
    </div>
  </div>
</section>

</main>
<footer class="site">
  <div class="container inner">
    <div class="cols">
      <div>
        <strong>HuertoHogar</strong>
        <p>Productos frescos y orgánicos. Calidad local.</p>
      </div>
      <div>
        <p><strong>Tiendas</strong></p>
        <p>Santiago · Puerto Montt · Villarrica · Nacimiento</p>
        <p>Viña del Mar · Valparaíso · Concepción</p>
      </div>
      <div>
        <p><strong>Contacto</strong></p>
        <p>contacto@huertohogar.cl</p>
      </div>
    </div>
    <div>© 2025 HuertoHogar · Sitio educativo</div>
  </div>
</footer>

<script src="assets/js/app.js" defer></script>

    <script>
    document.addEventListener('DOMContentLoaded',()=>{
      const cur = 'registro.html';
      document.querySelectorAll('nav a').forEach(a=>{if(a.getAttribute('href').includes(cur)) a.classList.add('active')});
    });
    </script>
    
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</script>
</body>
</html>
